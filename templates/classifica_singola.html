{% extends "base.html" %}

{% block content %}
<h2 class="text-xl font-bold mb-4 text-center">{{ titolo }}</h2>

{% if classifica %}
<div class="relative w-full">
    <!-- Freccia sinistra -->
    <button onclick="scrollLeft()" 
            class="absolute left-0 top-1/2 -translate-y-1/2 bg-gray-700 text-white rounded-full w-8 h-8 flex items-center justify-center shadow z-10">
        &#10094;
    </button>

    <!-- Contenitore orizzontale compatto -->
    <div id="scroll-container" class="flex flex-row flex-nowrap overflow-x-scroll space-x-4 px-10 no-scrollbar">
        {% for g, foto in classifica %}
        <div class="flex-none bg-white shadow-md rounded-xl p-2 w-32 h-56 relative transform transition-transform hover:scale-105">

            <!-- Posizione -->
            <div class="absolute top-1 left-1 bg-blue-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center">
                {{ loop.index }}
            </div>

            <!-- Nome -->
            <h3 class="text-sm font-bold text-center mb-1 truncate">{{ g[0] }}</h3>

            <!-- Foto piÃ¹ piccola -->
            <img src="{{ url_for('static', filename=foto) }}"
                 alt="Foto di {{ g[0] }}"
                 class="mx-auto mb-1 w-12 h-12 object-cover rounded-lg">

            <!-- Numero grande e label -->
            <p class="text-base font-bold text-center leading-none">
                {% if tipo == "voto" %}
                    {{ "%.2f"|format(g[5]) }}
                {% elif tipo == "gol" %}
                    {{ g[1] }}
                {% elif tipo == "giocate" %}
                    {{ g[2] }}
                {% elif tipo == "vinte" %}
                    {{ g[3] }}
                {% elif tipo == "perse" %}
                    {{ g[4] }}
                {% elif tipo == "mediagol" %}
                    {{ "%.2f"|format(g[6]) }}
                {% elif tipo == "mediagolfatti" %}
                    {{ "%.2f"|format(g[7]) }}
                {% elif tipo == "mediagolsubiti" %}
                    {{ "%.2f"|format(g[8]) }}
                {% elif tipo == "percentuale_vittorie" %}
                    {{ "%.2f"|format(g[1]) }}%
                {% endif %}
            </p>
            <p class="text-sm font-bold text-center uppercase leading-none">
                {% if tipo == "gol" %}GOL{% endif %}
                {% if tipo == "giocate" %}PARTITE{% endif %}
                {% if tipo == "vinte" %}VINTE{% endif %}
                {% if tipo == "perse" %}PERSE{% endif %}
                {% if tipo == "voto" %}VOTO{% endif %}
                {% if tipo == "mediagol" %}GOL/PARTITA{% endif %}
                {% if tipo == "mediagolfatti" %}GOL SQUADRA{% endif %}
                {% if tipo == "mediagolsubiti" %}GOL SUBITI{% endif %}
                {% if tipo == "percentuale_vittorie" %}% VITTORIE{% endif %}
            </p>
        </div>
        {% endfor %}
    </div>

    <!-- Freccia destra -->
    <button onclick="scrollRight()" 
            class="absolute right-0 top-1/2 -translate-y-1/2 bg-gray-700 text-white rounded-full w-8 h-8 flex items-center justify-center shadow z-10">
        &#10095;
    </button>
</div>

<script>
function scrollLeft() {
    document.getElementById('scroll-container').scrollBy({ left: -200, behavior: 'smooth' });
}
function scrollRight() {
    document.getElementById('scroll-container').scrollBy({ left: 200, behavior: 'smooth' });
}
</script>

<style>
.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
</style>

{% else %}
<p class="text-center">Nessun dato disponibile per questa classifica.</p>
{% endif %}
{% endblock %}

